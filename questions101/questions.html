{% extends 'base.html' %}
{% block content %}
{% load static %}
<div class="bg-tertiary-4">
    <div class="position-absolute top-10 end-0 p-2 mx-3 bg-gradient-primary fs-6 rounded">
        Time: <span id="timer">15:00</span><br>
    </div>

    <div id="newContent1" class="d">
        <div class="px-4">
            <img class="d-block mx-auto img-fluid" src="{% static 'img/apt_q/q1.png' %}" alt="">
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto">
                {% for i in "1234" %}
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="{{ forloop.counter0 }}">
                                <img src="{% static 'img/apt_q/q1o' %}{{ i }}.png" class="card-img-top" alt="...">
                            </a>
                        </div>
                    </center>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    {% for i in "23456" %}
    <div id="newContent{{i}}" class="d" style="display: none;">
        <div class="px-4">
            {{i}}
            <img class="d-block mx-auto img-fluid" src="{% static 'img/apt_q/q' %}{{i}}.png" alt="">
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto">
                {% for j in "1234" %}
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="{{ forloop.counter0 }}">
                                <img src="{% static 'img/apt_q/q' %}{{i}}o{{ j }}.png" class="card-img-top" alt="...">
                            </a>
                        </div>
                    </center>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}

    <div id="newContent7" class="d" style="display: none;">
        7
        <div class="px-4 text-center fs-4">
            <br>
            1. Paola is taller than Giovanni and shorter than Luis.
            <br>
            2. Kompal is shorter than Luis and taller than Paola.
            <br>
            3. Giovanni is taller than Kompal.
            <br><br>
            If the first two statements are true, the third statement is:
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto">
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                True
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                False
                            </a>
                        </center>
                    </div>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                Insufficient Information
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>


    <div id="newContent8" class="d" style="display: none;">
        8
        <div class="px-4 text-center fs-4">
            <br>
            Five cars are ready at the start line of a race. Car B is positioned to the right of Car A but is not positioned
            next to Car C. Car C is positioned next to Car D, which has Car B on its left side. Car E is positioned furthest
            from Car C.
            <br><br>
            Which car does not have a car to the left of it?
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto">
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                Car A
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                Car B
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                Car C
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                Car D
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="5">
                                Car E
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent9" class="d" style="display: none;">
        9
        <div class="px-4 text-center fs-4">
            <br>
            Work is to money
            <br><br>
            As study is to:
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto">
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                Fun
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                Job
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                Read
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                Knowledge
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent10" style="display: none;">
        10
        <div class="px-4 text-center fs-4">
            <br>
            Genius is to dunce
            <br><br>
            As destroy is to:
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto" >
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                Remove
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                Garbage
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                Create
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                Bin
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>

    <div id="newContent11" style="display: none;">
        11
        <div class="px-4 text-center fs-4">
            <br>
            Rotor, Radar, Kayak, Noon
            <br><br>
            Which of the words DOES belong to the list of words above?
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto" >
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                Madam
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                Train
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                Moon
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                Airplane
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent12" style="display: none;">
        12
        <div class="px-4 text-center fs-4">
            <br>
            Find the missing number:
            <br><br>
            32, ?, 48, 56
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto" >
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                40
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                34
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                36
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                44
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent13" style="display: none;">
        13
        <div class="px-4 text-center fs-4">
            <br>
            <img class="d-block mx-auto img-fluid" src="{% static 'img/apt_q/q' %}9.png" alt="">
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto" >
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                1
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                2
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                4
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                7
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent14" style="display: none;">
        14
        <div class="px-4 text-center fs-4">
            <br>
            At a grocery store grapes cost 30 cents per kg. Ram buys grapes and ends up paying $3.60. How many kg did she
            buy?
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto" >
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                11
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                12
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                14
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                10
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent15" style="display: none;">
        15
        <div class="px-4 text-center fs-4">
            <br>
            If the temperature decreases by 2 degrees per 1,000 feet of gained altitude and if the temperature at sea level
            is 25 degrees, what would the temperature at 35,000 feet be?
        </div>

        <div class="container text-center">
            <div class="row d-flex align-items-center justify-content-center m-auto" >
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="1">
                                -35
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="2">
                                -70
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="3">
                                -10
                            </a>
                        </div>
                    </center>
                </div>
                <div class="col-md-6 col-12 mb-md-3 mb-1">
                    <center>
                        <div class="card card-width card-hover p-2">
                            <a href="" class="tamang" data-index="4">
                                -45
                            </a>
                        </div>
                    </center>
                </div>
            </div>
        </div>
    </div>
    <div id="newContent16" style="display: none;">
        <div class="px-4 text-center h1 text-white">
            TEST RESULTS
        </div>

        <hr class="my-4">
        <section>
            <div class="row mt-4">
                <div class="col-12 col-md-6 mb-md-0 mb-4">
                    <div class="card-body p-3">
                        <div class="card border-radius-lg py-3 pe-1 mb-3 card-hover">
                            <canvas id="myChart" style="height: 350px;"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-12">
                    <center>
                        <div class="card m-3">
                            <div class="h3 p-6 text-white text-center">
                                RESULTS ARE OUT!
                            </div>
                            <div class="p-3">
                                Correct Answers: <span id="right">0</span><br>
                                Wrong Answers: <span id="wrong">0</span><br>
                                Time Taken: <span id="timestamp">0</span> Seconds<br>
                            </div>
                        </div>
                    </center>
                </div>
        </section>
    </div>



<br>
<br>
<br>
<br>

<script>    
    document.addEventListener('DOMContentLoaded', function () {
        const correctAnswerIndices = [1, 1, 0, 3, 3, 1, 2, 5, 4, 3, 1, 1, 3, 2, 4, 0];
        const answerLinks = document.querySelectorAll('.tamang');

        let currentContentIndex = 1; // Initialize with the first content
        let revealedCount = 0; // Keep track of how many blocks have been revealed

        let right = 0;
        let wrong = 0;

        // Variables

        let correctAnswers = 10;
        let wrongAnswers = 5;
        const unanswered = 3;
        let totalTimeInSeconds = 900;
        let timeElapsedInSeconds = 0;
        const timePerQuestion = "30 seconds";
        const averageScore = 80; // Assuming a percentage

        // CHARTJS NOW

        const ctx = document.getElementById('myChart');
        const chart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Right', 'Wrong'],
                datasets: [
                    {
                        label: 'Result',
                        data: [right, wrong],
                        backgroundColor: ['rgb(255, 99, 132)', 'rgb(255, 205, 86)'],
                        hoverOffset: 4,
                    },
                ],
            },
        });

        // TIMER NEXT

        // Function to update and display the timer
        function updateTimer() {
            const timerElement = document.getElementById("timer");
            const minutes = Math.floor(totalTimeInSeconds / 60);
            const seconds = totalTimeInSeconds % 60;
            timerElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        // Function to update and display time elapsed
        function updateTimeElapsed() {
            const timeElapsedElement = document.getElementById("timestamp");
            const minutes = Math.floor(timeElapsedInSeconds / 60);
            const seconds = timeElapsedInSeconds % 60;
            timeElapsedElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
        

        // Countdown timer function
        function startTimer() {
            const timerInterval = setInterval(function() {
                if (totalTimeInSeconds <= 0 || revealedCount >= 15) {
                    clearInterval(timerInterval); // Stop the timer when time is up or all blocks are revealed
                    if (totalTimeInSeconds <= 0) {
                        alert("Time's up!"); // You can replace this with your own action
                    }
                } else {
                    totalTimeInSeconds--;
                    updateTimer();
                    timeElapsedInSeconds++;
                    updateTimeElapsed();
                }
            }, 1000); // Update every second
        }
        

        // Start the timer when the page loads
        window.addEventListener("load", startTimer);

        answerLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                const clickedIndex = parseInt(this.getAttribute('data-index'), 10);

                if (correctAnswerIndices[currentContentIndex - 1] === clickedIndex) {
                    console.log('Correct answer!');
                    console.log('Clicked this:' + clickedIndex)
                    console.log('Correct Ans:' + correctAnswerIndices[currentContentIndex-1])
                    console.log('Current Content Index:' + currentContentIndex)
                    right++;
                    console.log(right)
                    document.getElementById("right").textContent = right;
                } else {
                    console.log('Incorrect answer.');
                    console.log('Clicked this:' + clickedIndex)
                    console.log('Correct Ans:' + correctAnswerIndices[currentContentIndex-1])
                    console.log('Current Content Index:' + currentContentIndex)
                    wrong++;
                    document.getElementById("wrong").textContent = wrong;
                }

                // Hide the current content
                const currentContent = document.getElementById(`newContent${currentContentIndex}`);
                if (currentContent) {
                    currentContent.style.display = 'none';
                }

                // Update the current content index to the next one or reset to 1 if 15 blocks have been revealed
                if (revealedCount < 15) {
                    currentContentIndex = (currentContentIndex % correctAnswerIndices.length) + 1;
                }

                // Show the new content if not all 15 blocks have been revealed
                if (revealedCount < 15) {
                    const newContent = document.getElementById(`newContent${currentContentIndex}`);
                    if (newContent) {
                        newContent.style.display = 'block';
                    }
                }

                revealedCount++; // Increment the count of revealed blocks

                chart.data.datasets[0].data = [right, wrong];
                chart.update();

                document.getElementById("unanswered").textContent = unanswered;
                document.getElementById("timeUsed").textContent = timeUsed;
                document.getElementById("timeLeft").textContent = timeLeft;
                document.getElementById("timePerQuestion").textContent = timePerQuestion;
                document.getElementById("averageScore").textContent = averageScore + "%";
            });
        });
    });

</script>

<script src="{% static 'js/plugins/chartjs.min.js' %}"></script>

{% endblock %}